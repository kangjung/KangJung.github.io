<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë‚˜ì—ê²Œ ë§ëŠ” í•„ë¼í…ŒìŠ¤ í”„ë¡œê·¸ë¨ ì°¾ê¸°</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700&display=swap" rel="stylesheet"/>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <style>
    body {margin:0;background:#f8f6fd;color:#302a40;font-family:'Pretendard',sans-serif;}
    .container{max-width:400px;background:#fff;margin:40px auto;border-radius:20px;padding:33px 17px 26px 17px;
      box-shadow:0 8px 38px #ceb1fa33;}
    header{text-align:center;}
    header h1{font-size:2rem;font-weight:700;letter-spacing:-1.1px;margin:0 0 12px 0;}
    header p{color:#725de0;font-size:1.02rem;}
    .progress{width:90%;margin:16px auto 31px auto;height:6px;background:#e5e1f3;border-radius:3px;}
    .progress-bar{background:linear-gradient(90deg,#8e7bff,#ffd274);height:100%;width:0;
      transition:width 0.35s;}
    .question-area{min-height:130px;margin-bottom:24px;text-align:center;font-size:1.13rem;
      font-weight:600;line-height:1.6;}
    .choices{display:flex;flex-direction:column;gap:13px;}
    .choicebtn{border:none;outline:none;background:#eceaf8;color:#514684;
      font-size:1.06rem;padding:17px;border-radius:15px;font-family:inherit;
      cursor:pointer;transition:background .16s, color .16s;}
    .choicebtn.selected,.choicebtn:active{background:#725de0;color:#fff;}
    .hide{display:none;}
    .result-area{text-align:center;margin-top:16px;animation:fadeInUp 0.8s;}
    .result-card{
      width:100%; max-width:340px; margin:24px auto 11px auto; background:#fff;
      border-radius:18px; box-shadow:0 7px 26px #b2bbfc28, 0 0.5px 3px #a98ffc08;
      padding:25px 19px;text-align:center;position:relative;font-family:'Pretendard',sans-serif;
    }
    .card-title{font-size:1.42rem;font-weight:700;color:#8566d4;margin-bottom:6px;}
    .program-list{margin:9px 0 2px 0;padding:0;}
    .program{font-size:1.11rem;color:#4b4198;font-weight:600;margin-bottom:1px;}
    .desc{color:#876983;margin:8px 0 13px 0;font-size:1.01rem;}
    .tip{background:#f7f0fb;color:#9b61cf;padding:7px 13px;border-radius:10px;margin-top:10px;font-size:.98rem;}
    .share-btn, .image-btn, .restart-btn{
      border:none; cursor:pointer; font-family:inherit; border-radius:14px; font-weight:600;
      display:block;margin:8px auto 0 auto;transition:background .13s, color .13s;
    }
    .share-btn {background:#7c66e5;color:#fff;padding:12px 0;width:70%;font-size:1.01rem;}
    .share-btn:hover{background:#5b51a3;}
    .image-btn{background:#f9edc3;color:#754fcf;padding:10px 0;width:70%;font-size:.99rem;}
    .image-btn:hover{background:#ffeedf;}
    .restart-btn{background:#ece9f5;color:#6a659c;padding:9px 0;width:50%;font-size:0.95rem;}
    .restart-btn:hover{background:#c7c2ee;}
    @keyframes fadeInUp{0%{opacity:0;transform:translateY(26px);}100%{opacity:1;transform:translateY(0);}}
    @media(max-width:480px){.container{padding:9px 1px 13px 1px;}.result-card{padding:12px 4px;}}
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1>ë‚´ê²Œ ë”± ë§ëŠ” í•„ë¼í…ŒìŠ¤ í”„ë¡œê·¸ë¨ ì°¾ê¸°</h1>
    <p>7ê°€ì§€ ì§ˆë¬¸ì— ë‹µí•˜ë©´<br><b>ë‚´ ëª©í‘œÂ·ìƒí™©ë³„ í”„ë¡œê·¸ë¨ì„ ì¶”ì²œ</b>í•´ë“œë ¤ìš”!</p>
  </header>
  <div class="progress"><div class="progress-bar"></div></div>
  <div class="question-area"></div>
  <div class="choices"></div>
  <div class="result-area hide"></div>
</div>
<script>
const PROGRAMS=["ì½”ì–´ì•¤ì½”ì–´","í’€ë°”ë””ê¸€ë¡œìš°","íŒŒì›Œí•˜ìš°ìŠ¤","ì–´ë“œë°´ìŠ¤ë“œ","ì†Œë² ì´ì§","í•„ë¼í”„ë ˆìŠ¤íŠ¸","ì•„ë¡œë§ˆí”Œë¡œìš°","í˜ì•¤ìŠ¬ë”","ë°”ë””ë°¸ëŸ°ìŠ¤","í˜ì•¤ìŠ¬ë”"];
const data = {
  questions:[
    { text:"í•„ë¼í…ŒìŠ¤ë¥¼ ì‹œì‘í•˜ëŠ” ì£¼ëœ ëª©ì ì€?", options:[
      {label:"ì²´ë ¥ ë° ê·¼ë ¥ ì¦ê°€", weights:{ì½”ì–´ì•¤ì½”ì–´:4, í’€ë°”ë””ê¸€ë¡œìš°:3, íŒŒì›Œí•˜ìš°ìŠ¤:3, ì–´ë“œë°´ìŠ¤ë“œ:2}},
      {label:"íë§, ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ", weights:{ì†Œë² ì´ì§:4, í•„ë¼í”„ë ˆìŠ¤íŠ¸:3, ì•„ë¡œë§ˆí”Œë¡œìš°:3}},
      {label:"ìì„¸ êµì •", weights:{ì†Œë² ì´ì§:3, í˜ì•¤ìŠ¬ë”:3, ë°”ë””ë°¸ëŸ°ìŠ¤:4}}
    ]},
    { text:"í•„ë¼í…ŒìŠ¤ ê²½í—˜ ê¸°ê°„ì€?", options:[
      {label:"0~6ê°œì›”", weights:{ì†Œë² ì´ì§:4, í•„ë¼í”„ë ˆìŠ¤íŠ¸:3}},
      {label:"1ë…„ ì´ìƒ", weights:{ì½”ì–´ì•¤ì½”ì–´:3, í˜ì•¤ìŠ¬ë”:3, ë°”ë””ë°¸ëŸ°ìŠ¤:3}},
      {label:"3ë…„ ì´ìƒ", weights:{íŒŒì›Œí•˜ìš°ìŠ¤:3, ì–´ë“œë°´ìŠ¤ë“œ:4, í’€ë°”ë””ê¸€ë¡œìš°:2}}
    ]},
    { text:"ë³¸ì¸ì—ê²Œ ê°€ì¥ ì¤‘ìš”í•œ ì‹ ì²´ ë¶€ìœ„ëŠ”?", options:[
      {label:"ì½”ì–´Â·í—ˆë¦¬", weights:{ì½”ì–´ì•¤ì½”ì–´:4, íŒŒì›Œí•˜ìš°ìŠ¤:3}},
      {label:"ìƒì²´(ì–´ê¹¨Â·ë“±)", weights:{í˜ì•¤ìŠ¬ë”:4, ë°”ë””ë°¸ëŸ°ìŠ¤:2}},
      {label:"ì „ì‹ ì˜ ë°¸ëŸ°ìŠ¤", weights:{í’€ë°”ë””ê¸€ë¡œìš°:4, í•„ë¼í”„ë ˆìŠ¤íŠ¸:2}},
      {label:"ì´ì™„/ìœ ì—°ì„±", weights:{ì•„ë¡œë§ˆí”Œë¡œìš°:4, ì†Œë² ì´ì§:2}}
    ]},
    { text:"ìš´ë™í•  ë•Œ, ì„ í˜¸í•˜ëŠ” ìŠ¤íƒ€ì¼ì€?", options:[
      {label:"ê°€ë²¼ìš´ ìš´ë™Â·ì²œì²œíˆ", weights:{ì†Œë² ì´ì§:4, í•„ë¼í”„ë ˆìŠ¤íŠ¸:3}},
      {label:"ê°•ë„ ë†’ê²Œ, ë•€ì´ ë§ì´", weights:{ì½”ì–´ì•¤ì½”ì–´:3, íŒŒì›Œí•˜ìš°ìŠ¤:3, ì–´ë“œë°´ìŠ¤ë“œ:3}},
      {label:"ê· í˜• ì¡íŒ ì¤‘ê°•ë„", weights:{ë°”ë””ë°¸ëŸ°ìŠ¤:3, í˜ì•¤ìŠ¬ë”:2, í’€ë°”ë””ê¸€ë¡œìš°:2}}
    ]},
    { text:"í•„ë¼í…ŒìŠ¤ ì™¸ í‰ì†Œ í™œë™ëŸ‰ì€?", options:[
      {label:"ê±°ì˜ ì—†ìŒ", weights:{ì†Œë² ì´ì§:4, ì•„ë¡œë§ˆí”Œë¡œìš°:3}},
      {label:"ê°€ë” ì‚°ì±… ë“± ê°€ë²¼ì›€", weights:{í•„ë¼í”„ë ˆìŠ¤íŠ¸:3, ë°”ë””ë°¸ëŸ°ìŠ¤:2}},
      {label:"ìš´ë™ì„ ìì£¼ í•¨", weights:{íŒŒì›Œí•˜ìš°ìŠ¤:3, ì–´ë“œë°´ìŠ¤ë“œ:3, ì½”ì–´ì•¤ì½”ì–´:2}}
    ]},
    { text:"ì–´ë–¤ ë¶„ìœ„ê¸°ë¥¼ ì›í•˜ì„¸ìš”?", options:[
      {label:"í¸ì•ˆ/ëª…ìƒ/ìŒì•…", weights:{ì•„ë¡œë§ˆí”Œë¡œìš°:4, ì†Œë² ì´ì§:3}},
      {label:"ì—ë„ˆì§€/ëª°ì…/ë‹¤ì´ë‚˜ë¯¹", weights:{íŒŒì›Œí•˜ìš°ìŠ¤:4, ì½”ì–´ì•¤ì½”ì–´:3}},
      {label:"ë°¸ëŸ°ìŠ¤/íƒ„íƒ„í•¨/ì§‘ì¤‘", weights:{í’€ë°”ë””ê¸€ë¡œìš°:3, í˜ì•¤ìŠ¬ë”:2, ë°”ë””ë°¸ëŸ°ìŠ¤:3}}
    ]},
    { text:"ìŠ¤ìŠ¤ë¡œ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ëª©í‘œëŠ”?", options:[
      {label:"ê¾¸ì¤€íˆ ìŠµê´€í™”", weights:{í•„ë¼í”„ë ˆìŠ¤íŠ¸:4, ì†Œë² ì´ì§:2}},
      {label:"ëŠ˜ ìƒˆë¡œìš´ ë„ì „", weights:{ì–´ë“œë°´ìŠ¤ë“œ:4, íŒŒì›Œí•˜ìš°ìŠ¤:2}},
      {label:"ë‚´ ëª¸ì— ì§‘ì¤‘", weights:{ì½”ì–´ì•¤ì½”ì–´:3, í˜ì•¤ìŠ¬ë”:3, ë°”ë””ë°¸ëŸ°ìŠ¤:2}}
    ]}
  ]
};
// í”„ë¡œê·¸ë¨ë³„ ì„¤ëª…(ì‹¤ì œ ì„¼í„° ì •ë³´ì— ë§ê²Œ ë³€ê²½ ê°€ëŠ¥)
const programInfo={
  "ì½”ì–´ì•¤ì½”ì–´":"ì‹¬ë¶€ê·¼ìœ¡Â·ì½”ì–´, í—ˆë¦¬ ê°•í™”ì— ì§‘ì¤‘ëœ ê³ íš¨ìœ¨ í”„ë¡œê·¸ë¨.",
  "í’€ë°”ë””ê¸€ë¡œìš°":"ì „ì‹  ê·¼ìœ¡ í™œì„±í™”+ë°¸ëŸ°ìŠ¤, ìš´ë™ ì´ˆì¤‘ê¸‰ ëª¨ë‘ ì¶”ì²œ.",
  "íŒŒì›Œí•˜ìš°ìŠ¤":"ê°•ë ¥ ì½”ì–´ì™€ ê·¼ë ¥Â·ì²´ë ¥ ì¦ì§„, ê³ ê°•ë„ ìš´ë™ ì„ í˜¸ìì—ê²Œ.",
  "ì–´ë“œë°´ìŠ¤ë“œ":"3ë…„ ì´ìƒ, ìˆ™ë ¨ììš© ê³ ë‚œë„ ë™ì‘ê³¼ ì²´ë ¥ ê°•í™”.",
  "ì†Œë² ì´ì§":"ê¸°ì´ˆìÂ·ê°€ë²¼ìš´ ìš´ë™, ì‹¬ì‹  ì•ˆì •ì„ ìœ„í•œ ë§ì¶¤.",
  "í•„ë¼í”„ë ˆìŠ¤íŠ¸":"ìì—°Â·í¸ì•ˆí•¨Â·ê¾¸ì¤€í•œ ìŠµê´€í™”, ì´ˆë³´~ì¤‘ê¸‰ì ê³„ì†ì  ì„±ì¥.",
  "ì•„ë¡œë§ˆí”Œë¡œìš°":"ì•„ë¡œë§ˆÂ·ìš”ê°€ ê°ì„±, ìœ ì—°ì„±+ë§ˆìŒ ì´ì™„Â·íë§ ìµœì .",
  "í˜ì•¤ìŠ¬ë”":"ìƒì²´, ì–´ê¹¨Â·ë“± ê°•í™” íŠ¹í™”, ìì„¸ êµì • ë™ë°˜.",
  "ë°”ë””ë°¸ëŸ°ìŠ¤":"ê· í˜•Â·ì •ë ¬, ì˜ëª»ëœ ìŠµê´€ ê°œì„ /ì²´í˜• êµì •ì— ì¤‘ì ."
};

let curIdx=0, answers=[], progScores={};
function renderQuestion(idx){
  const q=data.questions[idx];
  document.querySelector('.question-area').innerHTML=`<span>${idx+1}. ${q.text}</span>`;
  const box=document.querySelector('.choices'); box.innerHTML='';
  q.options.forEach((op,i)=>{
    const btn=document.createElement('button');
    btn.className='choicebtn'; btn.type='button'; btn.innerText=op.label;
    btn.onclick=()=>answer(idx,i,btn);
    box.appendChild(btn);
  });
  setProgress(idx/data.questions.length*100);
}
function answer(idx,op,btn){
  [...document.querySelector('.choices').children].forEach(b=>b.disabled=true);
  btn.classList.add('selected'); answers[idx]=op;
  setTimeout(()=>{
    if(curIdx < data.questions.length-1){ curIdx++; renderQuestion(curIdx);}
    else showResult();
  },330);
}
function setProgress(v){document.querySelector('.progress-bar').style.width=v+'%';}
function showResult(){
  // í”„ë¡œê·¸ë¨ ì ìˆ˜ 0 ì´ˆê¸°í™”
  progScores={}; PROGRAMS.forEach(p=>progScores[p]=0);
  data.questions.forEach((q,i)=>{
    const sel=q.options[answers[i]];
    Object.entries(sel.weights).forEach(([prog,pt])=>{
      if(progScores[prog]!==undefined) progScores[prog]+=pt;
    });
  });
  // ìµœê³  ì ìˆ˜ ìƒìœ„ 2~3ê°œ ì¶”ì¶œ
  const sorted=Object.entries(progScores)
    .sort((a,b)=>b[1]-a[1])
    .filter(e=>e[1]>=Math.max(...Object.values(progScores))-1);
  const best=sorted.slice(0,3);
  document.querySelector('.question-area').classList.add('hide');
  document.querySelector('.choices').classList.add('hide');
  setProgress(100);
  const $result=document.querySelector('.result-area');
  $result.classList.remove('hide');
  $result.innerHTML=`
    <div class="result-card" id="resultCard">
      <div class="card-title">ì¶”ì²œ í”„ë¡œê·¸ë¨</div>
      <div class="program-list">${
         best.map(e=>`<div class="program">${e[0]}</div>`).join("")
      }</div>
      <div class="desc">${best.map(e=> programInfo[e[0]]).join("<br>")}</div>
      <div class="tip">ê°œì¸ ì²´ì§ˆÂ·ëª©í‘œì— ë”°ë¼ ì¸ìŠ¤íŠ¸ëŸ­í„° ìƒë‹´ í›„ ì‹œì‘í•˜ë©´ ë” ì¢‹ì•„ìš”!</div>
    </div>
    <button class="share-btn" onclick="copyResult()">ê²°ê³¼ í…ìŠ¤íŠ¸ ë³µì‚¬</button>
    <button class="image-btn" onclick="captureResultCard()">ê²°ê³¼ ì¹´ë“œ ì´ë¯¸ì§€ ì €ì¥</button>
    <button class="restart-btn" onclick="restartTest()">í…ŒìŠ¤íŠ¸ ë‹¤ì‹œí•˜ê¸°</button>`;
  window.scrollTo({top:0,behavior:"smooth"});
}
function copyResult(){
  const progs=[...document.querySelectorAll('.program')].map(e=>e.innerText).join(', ');
  const desc=document.querySelector('.desc').innerText;
  const txt=`[í•„ë¼í…ŒìŠ¤ ì¶”ì²œ ê²°ê³¼]\n\n${progs}\n${desc}\n\nğŸ‘‰ ì§ì ‘ í•´ë³´ê¸°: ${location.origin}${location.pathname}`;
  navigator.clipboard.writeText(txt).then(()=>alert('ê²°ê³¼ê°€ ë³µì‚¬ëì–´ìš”!'));
}
function captureResultCard(){
  const card=document.getElementById("resultCard");
  if(!card)return;
  html2canvas(card,{
    backgroundColor:"#fff",
    scale:window.devicePixelRatio||2
  }).then(canvas=>{
    const link=document.createElement("a");
    link.download="pilates_result_card.png";
    link.href=canvas.toDataURL();
    link.click();
  });
}
function restartTest(){
  answers=[]; curIdx=0;
  document.querySelector('.result-area').classList.add('hide');
  document.querySelector('.question-area').classList.remove('hide');
  document.querySelector('.choices').classList.remove('hide');
  renderQuestion(0); setProgress(0);
}
renderQuestion(0);
</script>
</body>
</html>
